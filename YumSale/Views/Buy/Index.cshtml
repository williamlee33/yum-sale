@model List<YumSale.Models.BuyHoldViewModel>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<div>
    <h4>Item</h4>
    <hr />
    @foreach (var item in Model)
    {
        using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            <dl class="dl-horizontal">


                <dd>
                    @{
            try
            {
                if (item.ImageUrl != null)
                {
                    WebRequest webRequest = WebRequest.Create(item.ImageUrl);
                    var webResponse = webRequest.GetResponse();
                    <img src=@item.ImageUrl alt="Item Image" width="300" />

                }

            }
            catch (WebException ex)
            {

            }
                    }
                </dd>


                <dt>
                    @Html.DisplayNameFor(modelItem => item.Name)
                </dt>

                <dd>
                    @Html.DisplayFor(modelItem => item.Name)
                <dt>

                    @Html.DisplayNameFor(modelItem => item.Descrption)
                </dt>

                <dd>
                    @Html.DisplayFor(modelItem => item.Descrption)
                </dd>

                <dt>
                    Maximum Time Before You Pick Up
                </dt>
                <dd>
                    @Html.DisplayFor(modelItem => item.HoldLongDay) days @Html.DisplayFor(modelItem => item.HoldLongLessThanDay.Hours) hours
                </dd>

                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    @Html.LabelFor(modelItem => item.BuyerName, new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(modelItem => item.BuyerName, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(modelItem => item.BuyerName, "", new { @class = "text-danger" })
                    </div>
                </div>

                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    @Html.LabelFor(modelItem => item.Contact, new {@class = "control-label col-md-2"})
                    <div class="col-md-10">
                        @Html.EditorFor(modelItem => item.Contact, new {htmlAttributes = new {@class = "form-control"}})
                        @Html.ValidationMessageFor(modelItem => item.Contact, "", new {@class = "text-danger"})
                    </div>
                </div>

                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    @Html.LabelFor(modelItem => item.Token, new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(modelItem => item.Token, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(modelItem => item.Token, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Request Item" class="btn btn-default" />
                    </div>
                </div>

            </dl>
        }
    }

</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
